<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Multi-Player with Sync</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f9f9f9;
    }
    .video-container {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
    }
    iframe {
      width: 320px;
      height: 180px;
    }
    #syncButton {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #007BFF;
      color: white;
      border: none;
      cursor: pointer;
    }
    #syncButton:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <h1>YouTube Multi-Player Sync</h1>

  <div>
    <label for="video1-url">YouTube URL 1:</label>
    <input type="text" id="video1-url" placeholder="Enter first YouTube URL" />
  </div>
  <div>
    <label for="video2-url">YouTube URL 2:</label>
    <input type="text" id="video2-url" placeholder="Enter second YouTube URL" />
  </div>
  <div>
    <label for="video3-url">YouTube URL 3:</label>
    <input type="text" id="video3-url" placeholder="Enter third YouTube URL" />
  </div>
  <div>
    <label for="video4-url">YouTube URL 4:</label>
    <input type="text" id="video4-url" placeholder="Enter fourth YouTube URL" />
  </div>

  <div class="video-container">
    <iframe id="video1" src="" frameborder="0"></iframe>
    <iframe id="video2" src="" frameborder="0"></iframe>
    <iframe id="video3" src="" frameborder="0"></iframe>
    <iframe id="video4" src="" frameborder="0"></iframe>
  </div>

  <button id="syncButton" onclick="syncVideos()">Sync Videos</button>

  <script>
    const apiKey = 'AIzaSyBfrwUzoX8NJVN6AotMJggJh5cJLCqjmAc';  // Your API key here

    let video1StartTime = 0;
    let video1Duration = 0;
    let video1Player;

    // Load the YouTube API
    function loadYouTubeAPI() {
      const script = document.createElement('script');
      script.src = 'https://www.youtube.com/iframe_api';
      document.body.appendChild(script);
    }

    function onYouTubeIframeAPIReady() {
      video1Player = new YT.Player('video1', {
        events: {
          'onStateChange': onPlayerStateChange
        }
      });
    }

    function onPlayerStateChange(event) {
      if (event.data === YT.PlayerState.PLAYING) {
        video1StartTime = video1Player.getCurrentTime();
        video1Duration = video1Player.getDuration();
      }
    }

    function syncVideos() {
      const videoUrls = [
        document.getElementById('video1-url').value,
        document.getElementById('video2-url').value,
        document.getElementById('video3-url').value,
        document.getElementById('video4-url').value
      ];

      if (videoUrls[0]) {
        // Set the video 1 to its correct timestamp
        loadVideo(1, videoUrls[0], video1StartTime);
      }

      if (videoUrls[1]) {
        loadVideo(2, videoUrls[1], video1StartTime);
      }

      if (videoUrls[2]) {
        loadVideo(3, videoUrls[2], video1StartTime);
      }

      if (videoUrls[3]) {
        loadVideo(4, videoUrls[3], video1StartTime);
      }
    }

    function loadVideo(videoNumber, videoUrl, startTime) {
      const videoId = extractVideoId(videoUrl);
      const iframe = document.getElementById(`video${videoNumber}`);

      iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&start=${startTime}`;
    }

    function extractVideoId(url) {
      const videoIdMatch = url.match(/(?:https?:\/\/(?:www\.)?youtube\.com\/(?:[^\/\n]+\/\S+\/|\S+\/)?(?:v|e(?:mbed)?)\/|\S*\/)([a-zA-Z0-9_-]{11})/);
      return videoIdMatch ? videoIdMatch[1] : null;
    }

    // Trigger YouTube API loading
    loadYouTubeAPI();
  </script>
</body>
</html>
